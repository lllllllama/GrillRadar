# GrillRadar å¤–éƒ¨ä¿¡æ¯æºé›†æˆ

> **Milestone 4**: å¤–éƒ¨ä¿¡æ¯æºé›†æˆï¼ˆMVPç‰ˆæœ¬ï¼‰

æœ¬æ–‡æ¡£è¯´æ˜ GrillRadar çš„å¤–éƒ¨ä¿¡æ¯æºé›†æˆåŠŸèƒ½ï¼ŒåŒ…æ‹¬ JDï¼ˆèŒä½æè¿°ï¼‰å’Œé¢ç»ï¼ˆé¢è¯•ç»å†åˆ†äº«ï¼‰çš„æ£€ç´¢å’Œä½¿ç”¨ã€‚

---

## æ¦‚è¿°

Milestone 4 å¼•å…¥äº†å¤–éƒ¨ä¿¡æ¯æºé›†æˆï¼Œä½¿æŠ¥å‘Šç”Ÿæˆèƒ½å¤Ÿå‚è€ƒçœŸå®çš„ JD å’Œé¢ç»æ•°æ®ï¼Œç”Ÿæˆæ›´è´´è¿‘å®é™…é¢è¯•åœºæ™¯çš„é—®é¢˜ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- âœ… **JD æ£€ç´¢** - æ£€ç´¢ç›®æ ‡å…¬å¸å’Œå²—ä½çš„èŒä½æè¿°
- âœ… **é¢ç»æ£€ç´¢** - æ£€ç´¢ç›¸å…³çš„é¢è¯•ç»å†åˆ†äº«
- âœ… **ä¿¡æ¯èšåˆ** - è‡ªåŠ¨æå–å’Œèšåˆå…³é”®ä¿¡æ¯ï¼ˆæŠ€èƒ½è¦æ±‚ã€é«˜é¢‘é—®é¢˜ç­‰ï¼‰
- âœ… **Prompt æ³¨å…¥** - å°†å¤–éƒ¨ä¿¡æ¯è‡ªåŠ¨æ³¨å…¥åˆ°æŠ¥å‘Šç”Ÿæˆ Prompt ä¸­
- âœ… **API æ”¯æŒ** - æä¾› REST API æŸ¥è¯¢å¤–éƒ¨ä¿¡æ¯

---

## æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UserConfig         â”‚
â”‚  (enable_external   â”‚
â”‚   _info: true)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ExternalInfoService â”‚ â† uses â†’ MockDataProvider
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          (or real crawler)
           â”‚
           v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  InfoAggregator     â”‚
â”‚  (æå–+èšåˆ)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ExternalInfoSummary â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PromptBuilder      â”‚
â”‚  (æ³¨å…¥åˆ°Prompt)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ•°æ®æ¨¡å‹

### 1. JobDescriptionï¼ˆèŒä½æè¿°ï¼‰

```python
class JobDescription(BaseModel):
    company: str              # å…¬å¸åç§°
    position: str             # èŒä½åç§°
    location: Optional[str]   # å·¥ä½œåœ°ç‚¹
    salary_range: Optional[str]  # è–ªèµ„èŒƒå›´
    requirements: List[str]   # å²—ä½è¦æ±‚åˆ—è¡¨
    responsibilities: List[str]  # å·¥ä½œèŒè´£åˆ—è¡¨
    keywords: List[str]       # æå–çš„å…³é”®æŠ€èƒ½
    source_url: Optional[str] # æ¥æºURL
    crawled_at: Optional[datetime]  # çˆ¬å–æ—¶é—´
```

### 2. InterviewExperienceï¼ˆé¢ç»ï¼‰

```python
class InterviewExperience(BaseModel):
    company: str              # å…¬å¸åç§°
    position: str             # èŒä½åç§°
    interview_type: str       # é¢è¯•ç±»å‹ï¼ˆä¸€é¢/äºŒé¢/HRé¢ç­‰ï¼‰
    questions: List[str]      # é¢è¯•é—®é¢˜åˆ—è¡¨
    difficulty: Optional[str] # éš¾åº¦ï¼ˆç®€å•/ä¸­ç­‰/å›°éš¾ï¼‰
    topics: List[str]         # æ¶‰åŠçš„æŠ€æœ¯ä¸»é¢˜
    tips: Optional[str]       # é¢è¯•å»ºè®®
    source_url: Optional[str] # æ¥æºURL
    shared_at: Optional[datetime]  # åˆ†äº«æ—¶é—´
```

### 3. ExternalInfoSummaryï¼ˆä¿¡æ¯æ‘˜è¦ï¼‰

```python
class ExternalInfoSummary(BaseModel):
    job_descriptions: List[JobDescription]
    interview_experiences: List[InterviewExperience]
    aggregated_keywords: List[str]        # èšåˆçš„å…³é”®è¯
    aggregated_topics: List[str]          # èšåˆçš„ä¸»é¢˜
    high_frequency_questions: List[str]   # é«˜é¢‘é—®é¢˜
    retrieved_at: datetime                # æ£€ç´¢æ—¶é—´
```

---

## ä½¿ç”¨æ–¹å¼

### CLI æ–¹å¼

åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨å¤–éƒ¨ä¿¡æ¯æºï¼š

```json
{
  "mode": "job",
  "target_desc": "å­—èŠ‚è·³åŠ¨åç«¯å¼€å‘å·¥ç¨‹å¸ˆ",
  "domain": "backend",
  "enable_external_info": true,
  "target_company": "å­—èŠ‚è·³åŠ¨"
}
```

### Web API æ–¹å¼

åœ¨è¯·æ±‚ä¸­åŒ…å«å¤–éƒ¨ä¿¡æ¯å­—æ®µï¼š

```bash
curl -X POST http://localhost:8000/api/generate-report \
  -H "Content-Type: application/json" \
  -d '{
    "mode": "job",
    "target_desc": "å­—èŠ‚è·³åŠ¨åç«¯å¼€å‘å·¥ç¨‹å¸ˆ",
    "domain": "backend",
    "resume_text": "...",
    "enable_external_info": true,
    "target_company": "å­—èŠ‚è·³åŠ¨"
  }'
```

### æŸ¥è¯¢å¤–éƒ¨ä¿¡æ¯

```bash
# æœç´¢å¤–éƒ¨ä¿¡æ¯
curl "http://localhost:8000/api/external-info/search?company=å­—èŠ‚è·³åŠ¨&position=åç«¯"

# é¢„è§ˆå¤–éƒ¨ä¿¡æ¯æ‘˜è¦
curl "http://localhost:8000/api/external-info/preview?company=å­—èŠ‚è·³åŠ¨"
```

---

## Mock æ•°æ®æä¾›è€…

**å½“å‰ç‰ˆæœ¬ä½¿ç”¨ Mock æ•°æ®ï¼ˆæ¼”ç¤ºæ¨¡å¼ï¼‰**

ä¸ºäº†æ¼”ç¤ºåŠŸèƒ½è€Œä¸ä¾èµ–çœŸå®çš„ç½‘ç»œçˆ¬è™«ï¼ŒMilestone 4 MVP ç‰ˆæœ¬ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼š

- **MockDataProvider** - æä¾›é¢„å®šä¹‰çš„ JD å’Œé¢ç»æ•°æ®
- æ¶µç›–å­—èŠ‚è·³åŠ¨ã€é˜¿é‡Œå·´å·´ã€è…¾è®¯ç­‰å…¬å¸
- åŒ…å«åç«¯ã€Javaã€C++ ç­‰å¸¸è§å²—ä½

### Mock æ•°æ®ç¤ºä¾‹

**å­—èŠ‚è·³åŠ¨ - åç«¯å¼€å‘å·¥ç¨‹å¸ˆ JD:**
- è¦æ±‚ï¼š3å¹´ä»¥ä¸Šç»éªŒã€ç²¾é€šJava/Goã€ç†Ÿæ‚‰åˆ†å¸ƒå¼ç³»ç»Ÿ
- æŠ€æœ¯æ ˆï¼šJava, Go, MySQL, Redis, Kafka, Docker, Kubernetes

**å­—èŠ‚è·³åŠ¨ - åç«¯é¢ç»ï¼ˆä¸€é¢ï¼‰:**
- è¯¦ç»†è®²ä¸€ä¸‹ä½ çš„åˆ†å¸ƒå¼çˆ¬è™«ç³»ç»Ÿæ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ
- å¦‚ä½•ä¿è¯åˆ†å¸ƒå¼ä»»åŠ¡ä¸é‡å¤ã€ä¸ä¸¢å¤±ï¼Ÿ
- Rediså’ŒMySQLçš„æ•°æ®ä¸€è‡´æ€§å¦‚ä½•ä¿è¯ï¼Ÿ
- å¦‚æœè®©ä½ è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ

---

## æ‰©å±•ä¸ºçœŸå®æ•°æ®æº

å°† Mock æä¾›è€…æ›¿æ¢ä¸ºçœŸå®çˆ¬è™«ï¼š

```python
# app/sources/real_crawler.py
class RealDataProvider:
    def get_jds(self, company, position):
        # å®ç°çœŸå®çš„JDçˆ¬è™«
        # å¯ä½¿ç”¨ï¼š
        # - æ‹‰å‹¾ç½‘ API
        # - Bossç›´è˜ API
        # - WebSearch å·¥å…·
        pass

    def get_experiences(self, company, position):
        # å®ç°çœŸå®çš„é¢ç»çˆ¬è™«
        # å¯ä½¿ç”¨ï¼š
        # - ç‰›å®¢ç½‘
        # - LeetCodeè®ºå›
        # - çŸ¥ä¹
        pass
```

ç„¶ååœ¨ `ExternalInfoService` ä¸­ï¼š

```python
self.real_provider = RealDataProvider()

if self.use_mock:
    jds = self.mock_provider.get_mock_jds(company, position)
else:
    jds = self.real_provider.get_jds(company, position)  # çœŸå®çˆ¬è™«
```

---

## API ç«¯ç‚¹

### 1. GET /api/external-info/search

æœç´¢å¤–éƒ¨ä¿¡æ¯ï¼ˆè¿”å›å®Œæ•´çš„ JSON å¯¹è±¡ï¼‰

**å‚æ•°:**
- `company` (å¯é€‰): ç›®æ ‡å…¬å¸
- `position` (å¯é€‰): ç›®æ ‡å²—ä½
- `enable_jd` (é»˜è®¤true): æ˜¯å¦å¯ç”¨JDæ£€ç´¢
- `enable_interview_exp` (é»˜è®¤true): æ˜¯å¦å¯ç”¨é¢ç»æ£€ç´¢

**å“åº”:** `ExternalInfoSummary` JSON

### 2. GET /api/external-info/preview

é¢„è§ˆå¤–éƒ¨ä¿¡æ¯ï¼ˆè¿”å›æ–‡æœ¬æ‘˜è¦ï¼‰

**å‚æ•°:**
- `company` (å¯é€‰): ç›®æ ‡å…¬å¸
- `position` (å¯é€‰): ç›®æ ‡å²—ä½

**å“åº”:**
```json
{
  "summary": "æ ¼å¼åŒ–çš„æ–‡æœ¬æ‘˜è¦",
  "jd_count": 3,
  "experience_count": 5,
  "keywords": ["Java", "Go", "åˆ†å¸ƒå¼", ...]
}
```

---

## å¯¹æŠ¥å‘Šç”Ÿæˆçš„å½±å“

å¯ç”¨å¤–éƒ¨ä¿¡æ¯æºåï¼ŒæŠ¥å‘Šç”Ÿæˆ Prompt ä¼šåŒ…å«ï¼š

1. **æ ¸å¿ƒæŠ€èƒ½è¦æ±‚** - ä»å¤šä¸ªJDä¸­èšåˆçš„å…³é”®è¯
2. **å…¸å‹JDç¤ºä¾‹** - æ˜¾ç¤ºéƒ¨åˆ†çœŸå®JDçš„è¦æ±‚
3. **é«˜é¢‘è€ƒå¯Ÿä¸»é¢˜** - ä»é¢ç»ä¸­æå–çš„å¸¸è§ä¸»é¢˜
4. **é«˜é¢‘é¢è¯•é¢˜ç¤ºä¾‹** - çœŸå®é¢ç»ä¸­å‡ºç°çš„é—®é¢˜

è¿™ä½¿å¾—ç”Ÿæˆçš„é—®é¢˜ï¼š
- âœ… æ›´è´´è¿‘çœŸå®é¢è¯•åœºæ™¯
- âœ… åŒ…å«è¯¥å…¬å¸/å²—ä½çš„ç‰¹å®šè¦æ±‚
- âœ… è¦†ç›–é«˜é¢‘è€ƒå¯Ÿç‚¹
- âœ… æä¾›çœŸå®é¢è¯•é¢˜ä½œä¸ºå‚è€ƒ

---

## æ³¨æ„äº‹é¡¹

### MVP ç‰ˆæœ¬é™åˆ¶

- ğŸ”¸ **ä»…æ”¯æŒ Mock æ•°æ®** - éœ€è¦æ‰‹åŠ¨æ‰©å±•ä¸ºçœŸå®çˆ¬è™«
- ğŸ”¸ **ç®€å•çš„å…³é”®è¯æå–** - æœªä½¿ç”¨ NLP æŠ€æœ¯
- ğŸ”¸ **æœ‰é™çš„å»é‡å’Œèšç±»** - é«˜é¢‘é—®é¢˜æå–è¾ƒç®€å•

### æ‰©å±•å»ºè®®

1. **å®ç°çœŸå®çˆ¬è™«**
   - ä½¿ç”¨åˆæ³•çš„APIï¼ˆå¦‚æ™ºè”æ‹›è˜ã€æ‹‰å‹¾ç½‘å¼€æ”¾APIï¼‰
   - å°Šé‡ robots.txt
   - æ·»åŠ è¯·æ±‚é™æµ

2. **å¢å¼º NLP å¤„ç†**
   - ä½¿ç”¨ jieba è¿›è¡Œä¸­æ–‡åˆ†è¯
   - TF-IDF æå–å…³é”®è¯
   - èšç±»ç›¸ä¼¼é—®é¢˜

3. **ç¼“å­˜æœºåˆ¶**
   - Redis ç¼“å­˜æ£€ç´¢ç»“æœ
   - å®šæœŸæ›´æ–°æ•°æ®

4. **æ•°æ®è´¨é‡æ§åˆ¶**
   - è¿‡æ»¤ä½è´¨é‡æ•°æ®
   - éªŒè¯æ•°æ®å®Œæ•´æ€§
   - æ ‡æ³¨æ•°æ®æ¥æºå¯ä¿¡åº¦

---

## æ–‡ä»¶ç»“æ„

```
app/
â”œâ”€â”€ models/
â”‚   â””â”€â”€ external_info.py       # æ•°æ®æ¨¡å‹
â”œâ”€â”€ sources/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ mock_provider.py       # Mockæ•°æ®æä¾›è€…
â”‚   â””â”€â”€ external_info_service.py  # å¤–éƒ¨ä¿¡æ¯æœåŠ¡
â”œâ”€â”€ retrieval/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ info_aggregator.py     # ä¿¡æ¯èšåˆå™¨
â””â”€â”€ api/
    â””â”€â”€ report.py              # APIç«¯ç‚¹ï¼ˆå·²å¢å¼ºï¼‰
```

---

**Last Updated**: 2025-11-17  
**Version**: 1.0 (Milestone 4 MVP)  
**Status**: Demo/Mock æ¨¡å¼ï¼ˆå¯æ‰©å±•ï¼‰
