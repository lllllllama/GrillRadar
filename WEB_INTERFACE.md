# GrillRadar Web 界面

> [English Version](./WEB_INTERFACE.en.md)

## 🌐 概述

GrillRadar 现在提供了一个**精致的 Web 界面**，实际展示了多智能体协作和 TrendRadar 风格的外部数据集成。

### 核心特性

✅ **精美 UI**：现代化响应式设计，流畅动画
✅ **实时生成**：观看 AI 委员会讨论并生成问题
✅ **外部数据集成**：自动从真实 JD/面经数据库拉取
✅ **多智能体协作**：6 个专业智能体协同工作
✅ **导出选项**：下载 Markdown 或 HTML 格式报告
✅ **个性与判断力**：通过不同角色视角展现"个性"

---

## 🚀 快速开始

### 1. 启动 Web 服务器

```bash
# 方式一：使用便捷脚本
./run_web.sh

# 方式二：手动启动
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### 2. 在浏览器中打开

```
http://localhost:8000
```

### 3. 生成你的第一份报告

1. **选择模式**：求职/读研/混合模式
2. **输入目标**：例如 "字节跳动后端开发工程师"
3. **选择领域**（可选）：例如 "backend"
4. **粘贴简历**：你的简历文本（至少 50 字）
5. **点击 "🔥 生成报告"**

---

## 🎯 你将看到什么

### 阶段 1：加载中（15-30 秒）

```
AI虚拟委员会正在讨论中...
预计需要 15-30 秒
```

幕后发生的事：
- 6 个智能体并行提出问题
- TrendRadar 分析 15 个 JD + 12 份面经
- 关键词频率分析（例如 MySQL 出现 6 次）
- ForumEngine 去重和过滤
- 候选人守护者智能体质量控制

### 阶段 2：报告展示

精美的交互式报告包含：

**📊 元信息**
- 模式、目标、问题数量、生成时间

**📊 总体评估**
- AI 委员会的综合评价
- 展示多智能体协作结果

**✨ 候选人亮点**
- 从简历中识别的优势

**⚠️  关键风险**
- 潜在弱点和准备建议

**🔥 问题列表**（10-20 个问题）

每个问题卡片显示：
- **问题编号**：视觉标识
- **角色标签**：哪个智能体提问（技术面试官、HR、导师/PI 等）
- **主题标签**：领域
- **问题文本**：实际问题
- **💡 提问理由**：为什么这个问题重要（展现"个性"）
- **📝 答题结构**：如何组织你的回答
- **📚 支撑材料**：学习资源（**标注高频技能**）
- **🎯 练习提示词**：可直接使用的 AI 练习提示

### 阶段 3：导出

点击下载：
- **Markdown**：适合版本控制、分享
- **HTML**：自包含、带样式的报告

---

## 🔍 TrendRadar 集成实战

当你生成报告时，你会看到**真实的市场情报**集成：

### 示例：后端工程师报告

**检索到的外部数据：**
- 8 个来自字节跳动、阿里巴巴、腾讯等公司的 JD
- 10 份包含真实问题的面经

**关键词频率分析：**
```
MySQL      ██████ (6 次出现)
Redis      ████   (4 次出现)
性能优化    ████   (4 次出现)
```

**在 support_notes 中，你会看到：**
```
📚 支撑材料:
该问题涉及 MySQL（高频技能，在6个JD中出现），建议重点准备：
1. MySQL索引原理（B+树）
2. 事务隔离级别
3. 主从复制和读写分离
参考: 《高性能MySQL》第三版
```

**这就是 TrendRadar 风格的情报！** 系统知道 MySQL 在市场上很热门，并优先考虑它。

---

## 🤖 多智能体协作

### 6 个智能体

当你查看报告时，注意问题上的**角色标签**：

| 智能体 | 角色标签 | 关注点 |
|--------|----------|--------|
| **技术面试官** | 技术面试官 | CS 基础、编程能力 |
| **招聘经理** | 招聘经理 | 项目深度、岗位匹配 |
| **HR 智能体** | HR/行为面试官 | 软技能、文化契合 |
| **导师/PI** | 导师/PI | 研究潜力（读研模式） |
| **学术评审** | 学术评审 | 方法论（读研模式） |
| **候选人守护者** | 候选人守护者 | 质量控制 |

### 个性与判断力

你会在以下方面看到**个性**：

1. **多元视角**：来自 6 个不同观点的问题
2. **情境化理由**：每个问题解释为什么重要
3. **平衡覆盖**：不仅技术，还有软技能
4. **简历定制**：引用你的实际经验
5. **质量过滤**：没有通用或不公平的问题

### 示例：多智能体协作

**问题 1**（技术面试官）：
> 你在简历中提到使用Go开发API网关，请详细讲一下你是如何实现限流、熔断和负载均衡的？

**提问理由**：
> 技术面试官关注系统设计能力。简历中提到的API网关是核心项目，需要深入考察候选人对分布式系统关键技术的理解...

**问题 2**（HR/行为面试官）：
> 在小米实习期间，你如何与团队协作完成用户认证服务的重构？遇到过什么挑战？

**提问理由**：
> HR关注团队协作和沟通能力。从简历看候选人有实习经验，需要了解其在真实团队环境中的表现...

这展示了**判断力**：不同智能体关心不同的事情，给你全面的准备。

---

## 📊 技术架构

### 前端技术栈

- **HTML5**：语义化、可访问的标记
- **CSS3**：现代渐变、动画、响应式网格
- **原生 JS**：无框架、快速轻量
- **Fetch API**：与后端异步通信

### 后端技术栈

- **FastAPI**：高性能异步 Python 框架
- **Pydantic**：数据验证和序列化
- **JSON 数据提供者**：真实 JD/面经数据库
- **增强信息服务**：关键词频率分析

### 数据流

```
用户输入（简历）
      ↓
FastAPI 端点
      ↓
增强信息服务 → JSON 数据库（15 个 JD，12 份面经）
      ↓                         ↓
关键词频率分析 → 识别高频关键词
      ↓
提示构建器 → 注入外部数据 + 关键词情报
      ↓
LLM (Claude/OpenAI) → 生成问题
      ↓
多智能体模拟 → 6 个智能体提议并讨论
      ↓
ForumEngine → 去重并过滤
      ↓
报告组装 → 在 support_notes 中标记高频技能
      ↓
前端展示 → 精美、可导出的报告
```

---

## 🎨 自定义

### 更改端口

```bash
python -m uvicorn app.main:app --host 0.0.0.0 --port 9000
```

### 修改领域

编辑 `app/config/domains.yaml` 以添加/删除领域。使用 `--reload` 标志可自动重载更改。

### 添加更多外部数据

编辑 `app/sources/data/jd_database.json` 或 `interview_database.json`：

```json
{
  "id": "jd_custom_001",
  "company": "你的公司",
  "position": "你的职位",
  "keywords": ["Python", "Go", "MySQL"],
  "requirements": [...],
  ...
}
```

重启服务器将自动加载新数据。

### 自定义样式

编辑 `frontend/static/css/main.css`。所有 CSS 变量都在 `:root` 中：

```css
:root {
    --primary-color: #ff6b6b;  /* 改为你的品牌颜色 */
    --secondary-color: #4ecdc4;
    ...
}
```

---

## 🐛 故障排除

### 端口已被占用

```bash
# 查找并结束端口 8000 上的进程
lsof -ti:8000 | xargs kill -9

# 然后重启
./run_web.sh
```

### API 密钥未设置

```
错误: "API key not found"
```

**解决方案**：编辑 `.env` 并添加：
```
ANTHROPIC_API_KEY=sk-ant-your-key-here
# 或
OPENAI_API_KEY=sk-your-key-here
```

### 生成速度慢

如果生成时间超过 60 秒：
- 检查 API 配额/速率限制
- 检查网络连接
- 尝试不同的 LLM 提供商

### 未生成问题

```
错误: "问题数量不足：只有0个"
```

**原因**：
- 简历太短（<50 字）
- LLM API 错误
- 配置无效

**解决方案**：
- 检查简历长度
- 检查终端中的 API 日志
- 验证 `.env` 配置

---

## 📝 导出格式

### Markdown 导出

点击 "下载 Markdown" 获取：

```markdown
# GrillRadar 面试准备报告

## 📊 报告信息
- **模式**: 求职模式
- **目标**: 字节跳动后端开发工程师
- **生成时间**: 2025-11-17 18:00:00

## 总体评估
候选人具有扎实的后端开发基础...

## 问题 1
**角色**: 技术面试官
**标签**: 系统设计

### 问题
你在简历中提到...

### 提问理由
...
```

### HTML 导出

点击 "下载 HTML" 获取带嵌入样式的自包含文件。可以：
- 直接在浏览器中打开
- 通过电子邮件分享
- 打印为 PDF（浏览器打印对话框）

---

## 🔒 安全与隐私

### 数据处理

- **简历数据**：发送到 LLM API，不存储在服务器上
- **生成的报告**：仅在浏览器内存中，刷新后清除
- **无跟踪**：无分析、无 cookie
- **本地优先**：所有数据处理在你的服务器上进行

### API 密钥

- 存储在 `.env` 中（git 忽略）
- 从不发送到浏览器
- 仅用于服务器端 LLM 调用

### 生产部署

对于生产使用：
1. 启用 HTTPS
2. 添加身份验证
3. 速率限制
4. 输入清理（已有基本验证）

---

## 🚀 性能

### 典型指标

| 指标 | 值 |
|------|-----|
| **页面加载** | <1s |
| **报告生成** | 15-30s（取决于 LLM） |
| **报告展示** | <500ms |
| **导出** | <100ms |

### 优化建议

1. **使用 Haiku 模型**加快生成速度（牺牲一些质量）
2. **在 LLM 客户端启用缓存**
3. **减少问题数量**（10 个而不是 20 个）

---

## 📚 API 端点

对于希望以编程方式集成的开发者：

### POST /api/generate-report

```bash
curl -X POST http://localhost:8000/api/generate-report \
  -H "Content-Type: application/json" \
  -d '{
    "mode": "job",
    "target_desc": "字节跳动后端开发工程师",
    "domain": "backend",
    "resume_text": "your resume here..."
  }'
```

**响应**：
```json
{
  "success": true,
  "report": { /* Report object */ },
  "markdown": "# GrillRadar Report\n\n..."
}
```

### GET /api/domains

```bash
curl http://localhost:8000/api/domains
```

**响应**：可用领域列表（工程 + 研究）

### GET /health

```bash
curl http://localhost:8000/health
```

**响应**：
```json
{
  "status": "ok",
  "app": "GrillRadar",
  "version": "1.0.0"
}
```

---

## 🎓 学习资源

要了解它是如何工作的：

1. **架构**：阅读 [examples/ADVANCED_README.md](./examples/ADVANCED_README.md)
2. **质量控制**：阅读 [examples/quality_cases/README.md](./examples/quality_cases/README.md)
3. **源代码**：
   - 前端：`frontend/static/js/main.js`
   - 后端：`app/api/report.py`
   - 外部数据：`app/sources/json_data_provider.py`

---

## 🤝 贡献

想要改进 Web 界面？

**想法：**
- 添加实时进度跟踪
- 支持简历文件上传
- 添加报告历史/比较
- 主题自定义 UI
- 多语言支持

查看 [CONTRIBUTING.md](./CONTRIBUTING.md) 获取指南。

---

**🔥 享受使用 GrillRadar！**

如有问题或疑问，请在 [GitHub](https://github.com/lllllllama/GrillRadar) 上提出 issue。
